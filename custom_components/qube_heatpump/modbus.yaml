# Based on Modbus documentation from HR-Energy: https://www.hr-energy.com/media/m4gavc0p/202506_modbus-lijst-qube.pdf
- name: "Qube Heatpump"
  type: tcp
  host: 192.168.1.100
  port: 502
  
  binary_sensors:

  - name: "WP-Qube Voeding Bron pomp"
    address: 0
    input_type: discrete_input
    scan_interval: 10
    unique_id: Dout_SrcPmp_Val

  - name: "WP-Qube Voeding User pomp"
    address: 1
    input_type: discrete_input
    scan_interval: 10
    unique_id:  Dout_UsrPmp_Val

  - name: "WP-Qube Sturing Vierwegafsluiter"
    address: 2
    input_type: discrete_input
    scan_interval: 10
    unique_id:  Dout_FourWayVlv_Val

  - name: "WP-Qube Uitgang Koeling Actief"
    address: 3
    input_type: discrete_input
    scan_interval: 10
    unique_id: Dout_Cooling_Val

  - name: "WP-Qube Uitgang driewegafsluiter CV-Tapwater"
    address: 4
    input_type: discrete_input
    scan_interval: 10
    unique_id: Dout_ThreeWayVlv_Val

  - name: "WP-Qube Uitgang Bufferpomp"
    address: 5
    input_type: discrete_input
    scan_interval: 10
    unique_id: Dout_BufferPmp_Val

  - name: "WP-Qube Uitgang Heater 1"
    address: 6
    input_type: discrete_input
    scan_interval: 10
    unique_id: Dout_HeaterStep1_Val

  - name: "WP-Qube Uitgang Heater 2"
    address: 7
    input_type: discrete_input
    scan_interval: 10
    unique_id: Dout_HeaterStep2_Val

  - name: "WP-Qube Uitgang Heater 3"
    address: 8
    input_type: discrete_input
    scan_interval: 10
    unique_id: Dout_HeaterStep3_Val

  - name: "WP-Qube Status warmtepomp bediening"
    address: 9
    input_type: discrete_input
    scan_interval: 10
    unique_id: KeybOnOff

  - name: "WP-Qube Alarm Max Tijd Legionella overschreden"
    address: 10
    input_type: discrete_input
    scan_interval: 10
    unique_id: Al_MaxTime_ANTILEG_Active

  - name: "WP-Qube Alarm Max Tijd Tapwater overschreden"
    address: 11
    input_type: discrete_input
    scan_interval: 10
    unique_id: Al_MaxTime_DHW_Active

  - name: "WP-Qube Alarm dauwpunt (ingang) geactiveerd"
    address: 12
    input_type: discrete_input
    scan_interval: 10
    unique_id: Al_Dewpoint.Active

  - name: "WP-Qube Alarm aanvoer te warm CV"
    address: 13
    input_type: discrete_input
    scan_interval: 10
    unique_id: Al_UnderfloorSafety_Active 

  - name: "WP-Qube Alarm Flow CV"
    address: 15
    input_type: discrete_input
    scan_interval: 10
    unique_id: Alrm_Flw

  - name: "WP-Qube Alarm verzamelalarm CV"
    address: 16
    input_type: discrete_input
    scan_interval: 10
    unique_id: UsrAlrms

  - name: "WP-Qube Alarm verzamelalarm koelbedrijf"
    address: 17
    input_type: discrete_input
    scan_interval: 10
    unique_id: CoolingAlrms

  - name: "WP-Qube Alarm verzamelalarm CV-bedrijf"
    address: 18
    input_type: discrete_input
    scan_interval: 10
    unique_id: HeatingAlrms

  - name: "WP-Qube Alarm Bedrijfsuren"
    address: 19
    input_type: discrete_input
    scan_interval: 10
    unique_id: AlarmMng_Al_WorkingHour

  - name: "WP-Qube Alarm Verzamelalarm Bron"
    address: 20
    input_type: discrete_input
    scan_interval: 10
    unique_id: SrsAlrm

  - name: "WP-Qube Globaal Alarm"
    address: 21
    input_type: discrete_input
    scan_interval: 10
    unique_id: GlbAl

  - name: "WP-Qube Alarm verzamelalarm compressor"
    address: 22
    input_type: discrete_input
    scan_interval: 10
    unique_id:  AlarmMng_Al_PwrPlus

  - name: "WP-Qube Ruimteopnemer geactiveerd"
    address: 23
    input_type: discrete_input
    scan_interval: 10
    unique_id: RoomPrb_En

  - name: "WP-Qube Vraag Plant sensor"
    address: 25
    input_type: discrete_input
    scan_interval: 10
    unique_id: PlantDemand

  - name: "WP-Qube Tapwater regelaar vrijgegeven"
    address: 26
    input_type: discrete_input
    scan_interval: 10
    unique_id: En_DHWPID

  - name: "WP-Qube Plantopnemer is geactiveerd"
    address: 27
    input_type: discrete_input
    scan_interval: 10
    unique_id: PlantPrb_En

  - name: "WP-Qube Bufferopnemer is geactiveerd"
    address: 28
    input_type: discrete_input
    scan_interval: 10
    unique_id: BufferPrb_En

  - name: "WP-Qube Vraag op digitale ingang"
    address: 29
    input_type: discrete_input
    scan_interval: 10
    unique_id: ID_Demand

  - name: "WP-Qube Digitale ingang zomerbedrijf geactiveerd"
    address: 30
    input_type: discrete_input
    scan_interval: 10
    unique_id: ID_SummerWinter

  - name: "WP-Qube Digitale ingang dauwpunt geactiveerd"
    address: 31
    input_type: discrete_input
    scan_interval: 10
    unique_id: Dewpoint

  - name: "WP-Qube Digitale ingang booster geactiveerd"
    address: 32
    input_type: discrete_input
    scan_interval: 10
    unique_id: BoosterSecurity

  - name: "WP-Qube Digitale ingang flow bronzijde geactiveerd"
    address: 34
    input_type: discrete_input
    scan_interval: 10
    unique_id: SrcFlw

  - name: "WP-Qube Status dag/nacht modus"
    address: 37
    input_type: discrete_input
    scan_interval: 10
    unique_id: DayNightMode

  - name: "WP-Qube Vraag van thermostaat intern"
    address: 38
    input_type: discrete_input
    scan_interval: 10
    unique_id: ThermostatDemand

  - name: "WP-Qube Antilegionella is vrijgegeven"
    address: 39
    input_type: discrete_input
    scan_interval: 10
    unique_id: Req_ANTILEG_1

  sensors:
  - name: "WP-Qube Setpoint ruimte CV dag"
    address: 27
    input_type: holding
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: Thermostat_HeatSetP_Day

  - name: "WP-Qube Setpoint ruimte CV nacht"
    address: 29
    input_type: holding
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: Thermostat_HeatSetP_Night

  - name: "WP-Qube Setpoint ruimte Koel dag"
    address: 31
    input_type: holding
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: Thermostat_CoolSetP_Day

  - name: "WP-Qube Setpoint ruimte Koel nacht"
    address: 33
    input_type: holding
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: Thermostat_CoolSetP_Night

  - name: "WP-Qube dT aanvoertemperatuur tapwater"
    address: 43
    input_type: holding
    data_type: int16
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id:  TapW_TimeProgram_DT_BMS

  - name: "WP-Qube Minimumtemperatuur tapwater"
    address: 44
    input_type: holding
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: TapW_TimeProgram_DHWS

  - name: "WP-Qube Temperatuur tapwater bij actief tijdprogramma"
    address: 46
    input_type: holding
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: TapW_TimeProgram_DHWS

  - name: "WP-Qube Minimum setpoint bufferregeling"
    address: 99
    input_type: holding
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id:  Regulation_BufferSetP_Min

  - name: "WP-Qube Heat setpoint (zonder stooklijn)"
    address: 101
    input_type: holding
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id:  Usr_PID_HeatSetp

  - name: "WP-Qube Koel setpoint (zonder stooklijn)"
    address: 103
    input_type: holding
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: Usr_PID_CoolSetp

  - name: "WP-Qube Maximaalwaarde buffer setpoint (koelbedrijf)"
    address: 169
    input_type: holding
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: Regulation_BufferSetP_Max

  - name: "WP-Qube Percentage sturing User (CV) pomp"
    address: 4
    input_type: input
    data_type: float32
    offset: 100
    scale: -1
    precision: 0
    scan_interval: 10
    unit_of_measurement: "%"
    state_class: measurement
    unique_id:  Aout_UsrPmp_Val

  - name: "WP-Qube Percentage sturing bron pomp"
    address: 6
    input_type: input
    data_type: float32
    offset: 100
    scale: -1
    precision: 0
    scan_interval: 10
    unit_of_measurement: "%"
    state_class: measurement
    unique_id: Aout_SrcPmp_Val

  - name: "WP-Qube Percentage sturing bron afsluiter"
    address: 8
    input_type: input
    data_type: float32
    precision: 0
    scan_interval: 10
    unit_of_measurement: "%"
    state_class: measurement
    unique_id: Aout_SrcValve_Val

  - name: "WP-Qube Stuurvraag regeling tapwater"
    address: 14
    input_type: input
    data_type: float32
    unit_of_measurement: "%"
    precision: 0
    scan_interval: 10
    unique_id: DHW_RegReq

  - name: "WP-Qube Stuurvraag compressor"
    address: 16
    input_type: input
    data_type: float32
    unit_of_measurement: "%"
    precision: 0
    scan_interval: 10
    unique_id: CompPwrReq

  - name: "WP-Qube Gemeten Flow"
    address: 18
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 0
    min_value: 0
    device_class: volume_flow_rate
    unit_of_measurement: "L/min"
    unique_id: Flow

  - name: "WP-Qube Aanvoertemperatuur CV"
    address: 20
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: SupplyTemp

  - name: "WP-Qube Retourtemperatuur CV"
    address: 22
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: RetTemp

  - name: "WP-Qube Temperatuur bron vanaf dak"
    address: 24
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: SrcInTemp

  - name: "WP-Qube Temperatuur bron naar dak"
    address: 26
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: SrcOutTemp

  - name: "WP-Qube Ruimtetemperatuur"
    address: 28
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: RoomTemp

  - name: "WP-Qube Tapwatertemperatuur"
    address: 30
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: DHW_Temp

  - name: "WP-Qube Buitentemperatuur"
    address: 32
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: OutTemp

  - name: "WP-Qube COP (berekend)"
    address: 34
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 1
    state_class: measurement
    unique_id: GeneralMng_COP

  - name: "WP-Qube Actueel Vermogen"
    address: 36
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 0
    device_class: power
    unit_of_measurement: "W"
    state_class: measurement
    unique_id: GeneralMng_Thermic_Pwr

  - name: "WP-Qube Status warmtepomp"
    state_class: measurement
    scan_interval: 60
    device_class: enum
    slave: 1
    address: 38
    input_type: input
    data_type: uint16
    precision: 0
    unique_id: UnitStatus

  - name: "WP-Qube Berekend setpoint warmtepomp"
    address: 39
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: RegSetP

  - name: "WP-Qube Koel Setpoint"
    address: 41
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: Coolsetp_1

  - name: "WP-Qube Heat Setpoint"
    address: 43
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: Heatsetp_1

  - name: "WP-Qube Actuele snelheid compressor"
    address: 45
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 0
    unit_of_measurement: "rpm"
    state_class: measurement
    unique_id: Bldc_Evd_PowerPlus_Info_Pump

  - name: "WP-Qube Setpoint berekend tapwater"
    address: 47
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 1
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: DHW_SetP

  - name: "WP-Qube Bedrijfsuren tapwaterbedrijf"
    address: 50
    input_type: input
    data_type: int16
    scan_interval: 10
    precision: 0
    device_class: duration
    unit_of_measurement: "h"
    state_class: measurement
    unique_id: WorkingHours_DHW_HrsRet

  - name: "WP-Qube Bedrijfsuren CV-bedrijf"
    address: 52
    input_type: input
    data_type: int16
    scan_interval: 10
    precision: 0
    device_class: duration
    unit_of_measurement: "h"
    state_class: measurement
    unique_id: WorkingHours_Heat_HrsRet

  - name: "WP-Qube Bedrijfsuren koelbedrijf"
    address: 54
    input_type: input
    data_type: int16
    scan_interval: 10
    precision: 0
    device_class: duration
    unit_of_measurement: "h"
    state_class: measurement
    unique_id: WorkingHours_Cool_HrsRet

  - name: "WP-Qube Bedrijfsuren Heater 1"
    address: 56
    input_type: input
    data_type: int16
    scan_interval: 10
    precision: 0
    device_class: duration
    unit_of_measurement: "h"
    state_class: measurement
    unique_id:  WorkingHours_Heater1_Hrs

  - name: "WP-Qube Bedrijfsuren Heater 2"
    address: 58
    input_type: input
    data_type: int16
    scan_interval: 10
    precision: 0
    device_class: duration
    unit_of_measurement: "h"
    state_class: measurement
    unique_id: WorkingHours_Heater2_Hrs

  - name: "WP-Qube Bedrijfsuren Heater 3"
    address: 60
    input_type: input
    data_type: int16
    scan_interval: 10
    precision: 0
    device_class: duration
    unit_of_measurement: "h"
    state_class: measurement
    unique_id: WorkingHours_Heater3_Hrs

  - name: "WP-Qube Actueel elektrisch verbruik (berekend)"
    address: 61
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 0
    device_class: power
    unit_of_measurement: "W"
    state_class: measurement
    unique_id: GeneralMng_EletricPwr

  - name: "WP-Qube Totaal thermisch verbruik (berekend)"
    address: 63
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 0
    device_class: energy
    unit_of_measurement: "kWh"
    state_class: measurement
    unique_id: GeneralMng_TotalThermic_computed

  - name: "WP-Qube Setpoint plantregeling"
    address: 65
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 0
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: PlantSetP

  - name: "Totaal Elektrisch verbruik in kWh"
    address: 69
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 0
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: GeneralMng_AcumulatedPwr

  - name: "Totaal Thermische opbrengst in kWh"
    address: 71
    input_type: input
    data_type: float32
    scan_interval: 10
    precision: 0
    device_class: temperature
    unit_of_measurement: "°C"
    state_class: measurement
    unique_id: GeneralMng_AcumulatedThermic

  switches:

  - name: "WP-Qube Activeer warmtevraag"
    address: 19
    write_type: coil
    command_on: 1
    command_off: 0
    scan_interval: 10
    unique_id: BMS_Demand

  - name: "WP-Qube Schakel zomerbedrijf in (koeling)"
    address: 22
    write_type: coil
    command_on: 1
    command_off: 0
    scan_interval: 10
    unique_id: BMS_SummerWinter

  - name: "WP-Qube Start Tapwater verwarmen"
    address: 23
    write_type: coil
    command_on: 1
    command_off: 0
    scan_interval: 10
    unique_id: TapW_TimeProgram_BMS_Forced

  - name: "WP-Qube Start Antilegionella"
    address: 45
    write_type: coil
    command_on: 1
    command_off: 0
    scan_interval: 10
    unique_id: Antilegionella_FrcStart_ANT

  - name: "WP-Qube Stooklijn vrijgeven"
    address: 62
    write_type: coil
    command_on: 1
    command_off: 0
    scan_interval: 10
    unique_id: En_PlantSetP_Compens

  - name: "WP-Qube Omdraaien logica warmte-koelvraag"
    address: 63
    write_type: coil
    command_on: 1
    command_off: 0
    scan_interval: 10
    unique_id: Din_Demand

  - name: "Surplus PV" #Verhoogt ruimte setpoint Linq met 1K
    address: 64
    write_type: coil
    command_on: 1
    command_off: 0
    scan_interval: 10
    unique_id: Surplus_PV

  - name: "WP-Qube SG Ready A" #SG Ready sturing
    address: 65
    write_type: coil
    command_on: 1
    command_off: 0
    scan_interval: 10
    unique_id: BMS_SGready_A

  - name: "WP-Qube SG Ready B" #SG Ready sturing
    address: 66
    write_type: coil
    command_on: 1
    command_off: 0
    scan_interval: 10
    unique_id: BMS_SGready_B
